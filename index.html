<head>
    <title>Billionaire!</title>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="lib/calculon.js"></script>
    <script src="script.js"></script>
    <script src="Billionaire/billionaireStocks.js"></script>
    <script src="Billionaire/billionaireJobs.js"></script>
    <script src="Billionaire/billionaireEvents.js"></script>
    <script src="Billionaire/billionaireActions.js"></script>
    <script src="Billionaire/billionaireLoans.js"></script>
    <script src="controllers/StockMarket.js"></script>
    <script src="controllers/Actions.js"></script>

    <link rel='stylesheet' href='bower_components/bootstrap/dist/css/bootstrap.css'>
</head>

<body class='container' ng-controller="BillionaireGame" ng-app="BillionaireGame">
    <h1>Character</h1>

    <table class='table'>
        <tr>
            <td>
                Age
            </td>
            <td>
                {{session.player.age | number:0}}
            </td>
        </tr>
        <tr>
            <td>
                Job
            </td>
            <td>
                {{session.player.job.name}}
            </td>
        </tr>
    </table>
    <h3>Income Statement</h3>
    <table class='table'>
        <tr>
            <td>
                Paycheque
            </td>
            <td>
                {{session.player.job.salary / 12 | currency}}
            </td>
        </tr>
        <tr>
            <td>
                Income Tax Rate
            </td>
            <td>
                {{session.player.job.taxRate * session.player.incomeTaxMultiplier * 100 | number:2 }}%
            </td>
        </tr>
        <tr>
            <td>
                Expenses
            </td>
            <td>
                {{session.player.expenses | currency}}
            </td>
        </tr>
        <tr ng-hide="!session.player.getMonthlyDebtService()">
            <td>
                Monthly Interest Payment
            </td>
            <td>
                {{-session.player.getMonthlyDebtService() | currency}}
            </td>
        </tr>
        <tr>
            <td>
                Cash Flow
            </td>
            <td>
                {{session.player.getCashflow() | currency}}
            </td>
        </tr>
    </table>
    <h3>Balance Sheet</h3>
    <table class='table'>
        <tr>
            <td>
                Cash
            </td>
            <td>
                {{session.player.cash | currency}}
            </td>
        </tr>
        <tr ng-hide="!session.player.getTotalStockValue()">
            <td>
                Other Assets
            </td>
            <td>
                {{session.player.getTotalStockValue() | currency}}
            </td>
        </tr>
        <tr ng-hide="!session.player.getTotalDebt()">
            <td>
                Debts
            </td>
            <td>
                {{-session.player.getTotalDebt() | currency}}
            </td>
        </tr>
        <tr>
            <td>
                Net Worth
            </td>
            <td>
                {{session.player.getNetWorth() | currency}}
            </td>
        </tr>
    </table>

    <h2>Jobs</h2>
    <table class='table'>
        <tr ng-repeat="job in session.allJobs">
            <td>
                {{job.name}}
            </td>

            <td>
                <button class="btn btn-default" ng-hide="session.player.job == job" ng-click="openConfirmJob(job)">Take Job</button>
            </td>
        </tr>
    </table>

    <div class="modal fade" id='takeJobModal'>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click='unpause()'>&times;</button>
                    <h4 class="modal-title">Job Opportunity:
                        <strong>{{prospectiveJob.name}}</strong>
                    </h4>
                </div>
                <div class="modal-body">
                    <p>{{prospectiveJob.description}}</p>
                    <p ng-hide="!prospectiveJob.technical">
                        <strong>{{prospectiveJob.technical}}</strong>
                    </p>
                    <p ng-hide="prospectiveJob.requirement(session)">
                        <em>{{prospectiveJob.requirementMessage}}</em>
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" ng-click='unpause()' data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" ng-class="{disabled: !prospectiveJob.requirement(session)}" ng-click="confirmTakeJob(prospectiveJob)">Accept</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->


    <div ng-include="'templates/stocks/stocks.html'"></div>
    <div ng-include="'templates/actions/actions.html'"></div>
    <div ng-include="'templates/events/eventsModal.html'"></div>

    <div>
        <h2>Game</h2>
        <table class='table'>
            <tr>
                <td>
                    Year
                </td>
                <td>
                    {{2014 + session.world.month / 12 | number:0}}
                </td>
            </tr>
            <tr>
                <td>
                    Month
                </td>
                <td>
                    {{session.world.month % 12}}
                </td>
            </tr>
        </table>

    </div>

    <h2>Bank</h2>
    <table class='table'>

        <tr ng-repeat="loan in session.allLoans">
            <td>
                {{loan.name}}
            </td>
            <td>
                {{loan.maximum}}
            </td>
            <td>
                {{loan.interestRate}}
            </td>
            <td>
                <button ng-click="openLoanModal(loan)">Take Loan</button>
            </td>
        </tr>
    </table>
    <div class="modal fade" id='takeLoanModal'>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Loan Offer:
                        <strong>{{loanOffer.name}}</strong>
                    </h4>
                </div>
                <div class="modal-body">
                    <p>{{loanOffer.description}}</p>
                    <p ng-hide="!loanOffer.technical">
                        <strong>{{loanOffer.technical}}</strong>
                    </p>
                    <p ng-hide="loanOffer.requirement(session)">
                        <em>{{loanOffer.requirementMessage}}</em>
                    </p>

                    <table class='table'>
                        <tr>
                            <td>
                                Available Credit
                            </td>
                            <td>
                                {{loanOffer.maxCredit | currency}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Amount Requested:
                            </td>
                            <td>
                                $
                                <input ng-model="loanOffer.amountRequested">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Your Monthly Interest
                            </td>
                            <td>
                                {{loanOffer.amountRequested * loanOffer.interestRate / 12 | currency}}
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" ng-class="{disabled: !loanOffer.requirement(session)}" ng-click="confirmTakeLoan(loanOffer)">Accept</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->


    <div class="modal fade" id='worldMessageModal'>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title">{{worldMessage.title}}</strong>
                    </h3>
                </div>
                <div class="modal-body">
                    <p>{{worldMessage.body}}</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">{{worldMessage.ok || "OK"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->


</body>
