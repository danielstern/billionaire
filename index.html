<head>
    <title>Billionaire!</title>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="script.js"></script>
    <script src="Billionaire/billionaireStocks.js"></script>
    <script src="Billionaire/billionaireJobs.js"></script>
    <script src="Billionaire/billionaireEvents.js"></script>
    <script src="Billionaire/billionaireActions.js"></script>
    <script src="controllers/StockMarket.js"></script>

    <link rel='stylesheet' href='bower_components/bootstrap/dist/css/bootstrap.css'>
</head>

<body class='container' ng-controller="BillionaireGame" ng-app="BillionaireGame">
    <h1>Character</h1>

    <table class='table'>
        <tr>
            <td>
                Job
            </td>
            <td>
                {{session.player.job.name}}
            </td>
        </tr>
        <tr>
            <td>
                Paycheque
            </td>
            <td>
                {{session.player.job.salary / 12 | currency}}
            </td>
        </tr>
        <tr>
            <td>
                Expenses
            </td>
            <td>
                {{session.player.expenses | currency}}
            </td>
        </tr>
        <tr>
            <td>
                Income Tax Rate
            </td>
            <td>
                {{session.player.job.taxRate * session.player.incomeTaxMultiplier * 100 | number:2 }}%
            </td>
        </tr>
        <tr>
            <td>
                Cash
            </td>
            <td>
                {{session.player.cash | currency}}
            </td>
        </tr>
    </table>

    <div ng-include="'templates/stocks/stocks.html'"></div>

    <h3>Your Stocks</h3>

    <table class='table'>
        <tr ng-repeat="stock in session.player.stocks">
            <td>
                {{stock.name}}
            </td>
            <td>
                {{stock.bookValue}}
            </td>
            <td>
                {{stock.count}}
            </td>
        </tr>
    </table>
    </div>
    <h2>Actions</h2>

    <table class='table'>
        <tr ng-repeat="action in session.allActions" ng-hide="action.purchased">
            <td>
                {{action.name}}
            </td>
            <td>
                {{action.cost}}
            </td>
            <td>
                {{action.time}} Months
            </td>
            <td>
                <button class="btn btn-default" ng-click="openConfirmAction(action)" ng-class="{disabled: action.cost > session.player.cash || action.purchased}">TAKE ACTION</button>
            </td>
        </tr>
    </table>
    <div class="modal fade" id='actionsModal'>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click='unpause()'>&times;</button>
                    <h4 class="modal-title">{{currentActionHappening.name}} - {{currentActionHappening.cost | currency}}</strong>
                    </h4>
                </div>
                <div class="modal-body">
                    <p>{{currentActionHappening.description}}</p>
                    <p>
                        <strong>{{currentActionHappening.technical}}</strong>
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" ng-click='unpause()' data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" ng-class="{disabled: currentActionHappening.cost > session.player.cash || currentActionHappening.purchased}" ng-click="confirmTakeAction(currentActionHappening)">{{currentActionHappening.ok || "Take Action!"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->

    </div>

    <h3>Your Actions</h3>

    <table class='table'>
        <tr ng-repeat="action in session.player.actionsTaken">
            <td>
                {{action.name}}
            </td>
            <td>
                {{action.timeRemaining}} Months Left Until Completion
            </td>
          
        </tr>
    </table>
    </div>
    <div>
        <h2>Game</h2>
        <table class='table'>
            <tr>
                <td>
                    Year
                </td>
                <td>
                    {{2014 + session.world.month / 12 | number:0}}
                </td>
            </tr>
            <tr>
                <td>
                    Month
                </td>
                <td>
                    {{session.world.month % 12}}
                </td>
            </tr>
        </table>

    </div>
    <div>
        <h2>Events</h2>
        <div class="modal fade" id='eventModal'>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click='unpause()'>&times;</button>
                        <h4 class="modal-title">{{currentEventHappening.name}}</strong>
                        </h4>
                    </div>
                    <div class="modal-body">
                        <p>{{currentEventHappening.description}}</p>
                        <p>
                            <strong>{{currentEventHappening.technical}}</strong>
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click='unpause()'>{{currentEventHappening.ok || "OK"}}</button>
                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->
    </div>
</body>
